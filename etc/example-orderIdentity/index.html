<!DOCTYPE html>
<html>
    <body>
    
    	<div id="uploadPicture">
    	    <h2>Upload License Picture</h2>
            <input type="file" id="pictureInput" />
            <img id="preview" src="" height="200" alt="Image Preview">
        </div>
    
    	<form id="data" method="POST" action="test.php">
    	    <input type="hidden" id="svgData" name="svgData" value="" />
    	    <input type="hidden" id="imageData" name="imageData" />
            <input id="submit" type="submit" style="display:none" value="Submit" />
        </form>
    
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>

    	<script src="/vendor/jSignature/src/jSignature.js"></script>
        <script>

            $("#pictureInput").change(function() {
                previewFile();
            })

            $("#data").submit(function() {
                return confirm('INTERNAL: Confirm Submission');
            })

            //https://developer.mozilla.org/en-US/docs/Web/API/FileReader/readAsDataURL
            function previewFile() {
                var preview = $("#preview");
                var file    = document.querySelector('input[type=file]').files[0];
                var reader  = new FileReader();
        
                reader.addEventListener("load", function () {
                    preview.attr("src", reader.result);
                    $("#imageData").val(reader.result.split(',')[1]);
                    $("#submit").show();
                }, false);
        
                if (file) {
                    reader.readAsDataURL(file);
                }
            }
        </script>
    </body>
</html>
